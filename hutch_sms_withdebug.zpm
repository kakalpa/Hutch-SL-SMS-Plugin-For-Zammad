{
  "name": "Hutchsms",
  "version": "1.1.3",
  "vendor": "Kalpa",
  "license": "MIT",
  "url": "https://mainframe.lk/",
  "buildhost": "build.zammad.com",
  "builddate": "2024-1-24 10:37:42 UTC",
  "change_log": [
    {
      "version": "1.1.3",
      "date": "2024-1-24 14:37:42 UTC",
      "log": "with the API New."
    }
  ],
  "description": [
    {
      "language": "en",
      "text": "Adding two way SMS for Hutch"
    }
  ],
  "files": [
    {
      "location": "app/models/channel/driver/sms/hutch.rb",
      "permission": 644,
      "encode": "base64",
      "content": "Y2xhc3MgQ2hhbm5lbDo6RHJpdmVyOjpTbXM6Okh1dGNoCiAgTkFNRSA9ICdzbXMvaHV0Y2gnLmZyZWV6ZQoKICBkZWYgaW5pdGlhbGl6ZQogICAgQGFjY2Vzc190b2tlbiA9IG5pbAogICAgQHJlZnJlc2hfdG9rZW4gPSBuaWwKICAgIEBvYXV0aF9wcm92aWRlcl91cmwgPSBTZXR0aW5nLmdldCgnb3B0aW9uczo6Z2F0ZXdheScpIHx8ICdodHRwczovL2JzbXMuaHV0Y2gubGsnCiAgZW5kCgogIGRlZiBzZWxmLmRlZmluaXRpb24KICAgIHsKICAgICAgbmFtZTogJ0h1dGNoIFNNUycsCiAgICAgIGFkYXB0ZXI6ICdzbXMvaHV0Y2gnLAogICAgICBub3RpZmljYXRpb246IFsKICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjpnYXRld2F5JywgZGlzcGxheTogX18oJ0dhdGV3YXknKSwgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ2h0dHBzOi8vYnNtcy5odXRjaC5saycsIGRlZmF1bHQ6ICdodHRwczovL2JzbXMuaHV0Y2gubGsvYXBpL3NlbmRzbXMnIH0sCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6dG9rZW4nLCBkaXNwbGF5OiBfXygnVG9rZW4nKSwgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYJyB9LAogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnVzZXJuYW1lJywgZGlzcGxheTogX18oJ1VzZXJuYW1lJyksIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICd1c2VybmFtZScgfSwKICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjpwYXNzd29yZCcsIGRpc3BsYXk6IF9fKCdQYXNzd29yZCcpLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICdwYXNzd29yZCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ3Bhc3N3b3JkJyB9LAogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnNlbmRlcicsIGRpc3BsYXk6IF9fKCdTZW5kZXInKSwgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJzAwNDkxNzEwMDAwMDAwJyB9LAogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OmNoYW1wYWluJywgZGlzcGxheTogX18oJ0NoYW1wYWluJyksIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICdjYW1wYWlnbiBuYW1lJyB9LAogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6Om1hc2snLCBkaXNwbGF5OiBfXygnTWFzaycpLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnbWFzaycgfSwKICAgICAgXQogICAgfQogIGVuZAoKICBkZWYgc2VuZChvcHRpb25zLCBhdHRyLCBfbm90aWZpY2F0aW9uID0gZmFsc2UpCiAgICBSYWlscy5sb2dnZXIuaW5mbyAiU2VuZGluZyBTTVMgdG8gcmVjaXBpZW50ICN7YXR0cls6cmVjaXBpZW50XX0iCgogICAgcmV0dXJuIHRydWUgaWYgU2V0dGluZy5nZXQoJ2ltcG9ydF9tb2RlJykKCiAgICBSYWlscy5sb2dnZXIuaW5mbyAiQmFja2VuZCBzZW5kaW5nIEh1dGNoIFNNUyB0byAje2F0dHJbOnJlY2lwaWVudF19IgoKICAgIG9idGFpbl9hY2Nlc3NfdG9rZW4ob3B0aW9ucykgaWYgQGFjY2Vzc190b2tlbi5uaWw/IHx8IGFjY2Vzc190b2tlbl9leHBpcmVkPwoKICAgIGJlZ2luCiAgICAgIHNlbmRfY3JlYXRlKG9wdGlvbnMsIGF0dHIpCiAgICAgIHRydWUKICAgIHJlc2N1ZSBGYXJhZGF5OjpVbmF1dGhvcml6ZWRFcnJvcgogICAgICBSYWlscy5sb2dnZXIuaW5mbyAiVG9rZW4gZXhwaXJlZC4gUmVuZXdpbmcgYWNjZXNzIHRva2VuLi4uIgogICAgICByZW5ld19hY2Nlc3NfdG9rZW4ob3B0aW9ucykKICAgICAgcmV0cnkKICAgIHJlc2N1ZSA9PiBlCiAgICAgIFJhaWxzLmxvZ2dlci5lcnJvciAiRXJyb3Igc2VuZGluZyBTTVM6ICN7ZS5tZXNzYWdlfSIKICAgICAgZmFsc2UKICAgIGVuZAogIGVuZAoKICBwcml2YXRlCgogIGRlZiBvYnRhaW5fYWNjZXNzX3Rva2VuKG9wdGlvbnMpCiAgICBSYWlscy5sb2dnZXIuaW5mbyAiT2J0YWluaW5nIGFjY2VzcyB0b2tlbiBmcm9tICN7QG9hdXRoX3Byb3ZpZGVyX3VybH0vYXBpL2xvZ2luIgoKICAgIHJlc3BvbnNlID0gRmFyYWRheS5wb3N0KCIje0BvYXV0aF9wcm92aWRlcl91cmx9L2FwaS9sb2dpbiIpIGRvIHxyZXF8CiAgICAgIHJlcS5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICByZXEuaGVhZGVyc1snQWNjZXB0J10gPSAnKi8qJwogICAgICByZXEuaGVhZGVyc1snWC1BUEktVkVSU0lPTiddID0gJ3YxJwogICAgICByZXEuYm9keSA9IHsgdXNlcm5hbWU6IG9wdGlvbnNbOnVzZXJuYW1lXSwgcGFzc3dvcmQ6IG9wdGlvbnNbOnBhc3N3b3JkXSB9LnRvX2pzb24KICAgIGVuZAoKICAgIGlmIHJlc3BvbnNlLnN1Y2Nlc3M/CiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgIEBhY2Nlc3NfdG9rZW4gPSBib2R5WydhY2Nlc3NUb2tlbiddCiAgICAgIEByZWZyZXNoX3Rva2VuID0gYm9keVsncmVmcmVzaFRva2VuJ10KICAgICAgUmFpbHMubG9nZ2VyLmluZm8gIkFjY2VzcyB0b2tlbiBvYnRhaW5lZCBzdWNjZXNzZnVsbHkiCiAgICBlbHNlCiAgICAgIHJhaXNlICJFcnJvciBvYnRhaW5pbmcgYWNjZXNzIHRva2VuOiAje3Jlc3BvbnNlLnN0YXR1c30gI3tyZXNwb25zZS5ib2R5fSIKICAgIGVuZAogIGVuZAoKICBkZWYgcmVuZXdfYWNjZXNzX3Rva2VuKG9wdGlvbnMpCiAgICByZXNwb25zZSA9IEZhcmFkYXkuZ2V0KCIje0BvYXV0aF9wcm92aWRlcl91cmx9L2FwaS90b2tlbi9hY2Nlc3NUb2tlbiIpIGRvIHxyZXF8CiAgICAgIHJlcS5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICByZXEuaGVhZGVyc1snQWNjZXB0J10gPSAnKi8qJwogICAgICByZXEuaGVhZGVyc1snWC1BUEktVkVSU0lPTiddID0gJ3YxJwogICAgICByZXEuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAje0ByZWZyZXNoX3Rva2VufSIKICAgIGVuZAoKICAgIGlmIHJlc3BvbnNlLnN1Y2Nlc3M/CiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpCiAgICAgIEBhY2Nlc3NfdG9rZW4gPSBib2R5WydhY2Nlc3NUb2tlbiddCiAgICAgIFJhaWxzLmxvZ2dlci5pbmZvICJBY2Nlc3MgdG9rZW4gcmVuZXdlZCBzdWNjZXNzZnVsbHkiCiAgICBlbHNlCiAgICAgIHJhaXNlIEZhcmFkYXk6OlVuYXV0aG9yaXplZEVycm9yLm5ldygiRXJyb3IgcmVuZXdpbmcgYWNjZXNzIHRva2VuOiAje3Jlc3BvbnNlLnN0YXR1c30gI3tyZXNwb25zZS5ib2R5fSIpCiAgICBlbmQKICBlbmQKCiAgZGVmIGFjY2Vzc190b2tlbl9leHBpcmVkPwogICAgcmV0dXJuIHRydWUgaWYgQGFjY2Vzc190b2tlbi5uaWw/CgogICAgZGVjb2RlZF90b2tlbiA9IEpXVC5kZWNvZGUoQGFjY2Vzc190b2tlbiwgbmlsLCBmYWxzZSkuZmlyc3QKICAgIGV4cGlyYXRpb25fdGltZSA9IGRlY29kZWRfdG9rZW5bJ2V4cCddCgogICAgY3VycmVudF90aW1lID0gVGltZS5ub3cudG9faQogICAgZXhwaXJhdGlvbl90aW1lIDw9IGN1cnJlbnRfdGltZQogIGVuZAoKICBkZWYgc2VuZF9jcmVhdGUob3B0aW9ucywgYXR0cikKICAgIHVybCA9ICIje0BvYXV0aF9wcm92aWRlcl91cmx9L2FwaS9zZW5kc21zIgogICAgcmV0dXJuIGlmIFNldHRpbmcuZ2V0KCdkZXZlbG9wZXJfbW9kZScpCgogICAgcGF5bG9hZCA9IHsKICAgICAgY2FtcGFpZ25OYW1lOiBvcHRpb25zWzpjaGFtcGFpbl0sCiAgICAgIG1hc2s6IG9wdGlvbnNbOm1hc2tdLAogICAgICBudW1iZXJzOiBhdHRyWzpyZWNpcGllbnRdLAogICAgICBjb250ZW50OiBhdHRyWzptZXNzYWdlXQogICAgfQoKICAgIHJlc3BvbnNlID0gRmFyYWRheS5wb3N0KHVybCkgZG8gfHJlcXwKICAgICAgcmVxLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgIHJlcS5oZWFkZXJzWydBY2NlcHQnXSA9ICcqLyonCiAgICAgIHJlcS5oZWFkZXJzWydYLUFQSS1WRVJTSU9OJ10gPSAndjEnCiAgICAgIHJlcS5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICN7QGFjY2Vzc190b2tlbn0iCiAgICAgIHJlcS5ib2R5ID0gcGF5bG9hZC50b19qc29uCiAgICBlbmQKCiAgICBpZiByZXNwb25zZS5zdWNjZXNzPwogICAgICBSYWlscy5sb2dnZXIuaW5mbyAiU01TIHNlbnQgc3VjY2Vzc2Z1bGx5IgogICAgZWxzZQogICAgICBtZXNzYWdlID0gIlJlY2VpdmVkIG5vbi1PSyByZXNwb25zZSBmcm9tIGdhdGV3YXkgVVJMICcje3VybH0nIgogICAgICBSYWlscy5sb2dnZXIuZXJyb3IgIiN7bWVzc2FnZX06ICN7cmVzcG9uc2UuYm9keS5pbnNwZWN0fSIKICAgICAgcmFpc2UgbWVzc2FnZQogICAgZW5kCiAgZW5kCgplbmQ="
    }
  ]
}
